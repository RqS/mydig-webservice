<link rel="stylesheet" href="styles/main.css">
<script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="bower_components/paper-dialog/paper-dialog.html">

<link rel="import" href="bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<link rel="import" href="bower_components/paper-input/paper-textarea.html">
<link rel="import" href="bower_components/iron-form/iron-form.html">
<link rel="import" href="bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="bower_components/paper-card/paper-card.html">
<link rel="import" href="bower_components/paper-dialog-behavior/paper-dialog-behavior.html">
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/0.10.0/lodash.min.js"></script>
<link rel="import" href="elements/elements.html">
<link rel="import" href="bower_components/paper-date-picker-item/paper-date-picker-item.html">
<!-- <script src="bower_components/moment/min/locales.js"></script>
<link rel="import" href="bower_components/polymer/polymer.html">
 --><style is="custom-style" include="shared-styles"></style>
<style is="custom-style" include="search-styles"></style>
<link rel="import" href="theme.css">
<script>
	var projectName = window.location.href.split('?');
	var dataText;
	
	function showMenu() {
	  	  document.getElementById('entity').opened = false;
	  	  document.getElementById('menu').opened = true;
	  	  document.getElementById('glossary').opened = false;
	  	  document.getElementById('field').opened = false;
	}
	
	function showField() {
  	  document.getElementById('entity').opened = false;
  	  document.getElementById('glossary').opened = false;
  	  document.getElementById('field').opened = true;
  	  document.getElementById('menu').opened = false;
    }
	
	var openFile = function (event) {
	    var input = event.target;
	    var reader = new FileReader();
	    reader.onload = function () {
	    	dataText = reader.result;
	       
	    };
	    reader.readAsText(input.files[0]);
	};
	
	function submitFormData() {
		var glossName = document.getElementById('glossary_name').value;
   	 var file =  $('input[type=file]')[0].files[0];
       	 
   	 
   	 var url="http://52.36.12.77:9879/projects/"+projectName[1]+"/glossaries";
   	//------------ 
   	 var formData = new FormData();

   	 formData.append("glossary_name", glossName);
   	 formData.append("glossary_file", file); // number 123456 is immediately converted to a string "123456"
		console.log(formData);
   	 
   	 var request = new XMLHttpRequest();
   	 request.open("POST", url);
   //	request.setRequestHeader("Content-type", "application/json");
   	request.setRequestHeader("Authorization", "Basic " + btoa("Memex:USC-ISI-I2"));
	
   	request.onreadystatechange = function () {
		    if (request.readyState === 4 && request.status === 201) {
		    	location.reload(true);
		    }
		};
	
	 request.send(formData);
	}
    function showEntity() {
  	  document.getElementById('field').opened = false;
  	  document.getElementById('glossary').opened = false;
  	  document.getElementById('entity').opened = true;
  	document.getElementById('menu').opened = false;
    }
    
    function showGlossary() {
  	  document.getElementById('field').opened = false;
  	  document.getElementById('entity').opened = false;
  	  document.getElementById('glossary').opened = true;
  	document.getElementById('menu').opened = false;
    }
    
    function addNewTag() {
    	var xhr = new XMLHttpRequest();
    	var url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/tags";
   		var name=document.getElementById("tagNameInput").value;
   		var description=document.getElementById("tagDescriptionInput").value;
   		var screenlabel=document.getElementById("tagSceenLabelInput").value;
   		var positiveprecision=document.getElementById("tagPositiveInput").value;
   		var negativeprecision=document.getElementById("tagNegativeInput").value;
   		var inmenu=document.getElementById("tagCheckBoxInput").checked;
   		
   		xhr.open("POST", url, true);
   		xhr.setRequestHeader("Content-type", "application/json");
   		xhr.setRequestHeader("Authorization", "Basic " + btoa("Memex:USC-ISI-I2"));
		
   		xhr.onreadystatechange = function () {
   		    if (xhr.readyState === 4 && xhr.status === 201) {
   		    	document.getElementById("addTagsDialog").toggle();
   		   		location.reload(true);
   		    }
   		};
   		
   		var data = JSON.stringify({
   		  "tag_name": name+"",
   		  "tag_object": {
   		    "description": description+"",
   		    "include_in_menu": inmenu,
   		    "name": name+"",
   		    "negative_class_precision": negativeprecision,
   		    "positive_class_precision": positiveprecision,
   		    "sceen_label":screenlabel
   		  }
   		});
   		
   		xhr.send(data);
   		
      }
    
    function addNewField() {
    	var xhr = new XMLHttpRequest();
    	var url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/fields";
   		var name=document.getElementById("fieldnameinput").value;
   		var description=document.getElementById("fielddescriptioninput").value;
   		var screenlabel=document.getElementById("fieldscreenlabelinput").value;
   		var color = document.getElementById("fieldcolorinput").value;
   		
   		var groupname = document.getElementById("fieldgroupnameinput").value;
   		var icon=document.getElementById("fieldiconinput").value;
   		var type="";
   		var searchimp = document.getElementById("fieldsearchinput").value;
   		var gloassry=document.getElementById("fieldglossaryinput").value;
   		
   		var combinefields=document.getElementById("fieldcombinedfieldsinput").checked;
   		var facet=document.getElementById("fieldfacetinput").checked;
   		var link=document.getElementById("fieldlinkinput").checked;
   		var result=document.getElementById("fieldresultinput").checked;
   		var search=document.getElementById("fieldsearchinput").checked;
   		var networksearch=document.getElementById("fieldnetworkinput").checked;
   		
   		xhr.open("POST", url, true);
   		xhr.setRequestHeader("Content-type", "application/json");
   		xhr.setRequestHeader("Authorization", "Basic " + btoa("Memex:USC-ISI-I2"));
		
   		xhr.onreadystatechange = function () {
   		    if (xhr.readyState === 4 && xhr.status === 201) {
   		    	location.reload(true);
   		    }
   		};
   		
   		var data = JSON.stringify({
   		  "field_name": name,
   		  "field_object": {
   		    "color": color,
   		    "combine_fields": combinefields,
   		    "description": description,
   		    "glossaries": [
				gloassry
   		    ],
   		    "group_name": groupname,
   		    "icon": icon,
   		    "name": name,
   		    "screen_label": screenlabel,
   		    "search_importance": searchimp,
   		    "show_as_link": link,
   		    "show_in_facets": facet,
   		    "show_in_result": result,
   		    "show_in_search": search,
   		    "type": type,
   		    "use_in_network_search": networksearch
   		  }
   		});
   		
   		xhr.send(data);
   		
      }
    
</script>
<dom-module id="project-details"> 
<template>
	  <iron-ajax
		id="getTags" method="GET" content-type="application/json"
		handle-as="json" on-response="fillTags" auto> </iron-ajax> 
		
		 <iron-ajax
		id="deleteTags" method="DELETE" content-type="application/json"
		handle-as="json" last-response="deleteTags" auto> </iron-ajax>
		
		<iron-ajax
		id="updateSavedTags" method="POST" content-type="application/json"
		handle-as="json" on-response="updateDone" auto> </iron-ajax>
		
	
		<iron-ajax
		id="getFields" method="GET" content-type="application/json"
		handle-as="json" on-response="fillFields" auto> </iron-ajax> 
		
		
		<iron-ajax
		id="deleteFields" method="DELETE" content-type="application/json"
		handle-as="json" last-response="deleteTags" auto> </iron-ajax>
		
		<iron-ajax
		id="updateSavedFields" method="POST" content-type="application/json"
		handle-as="json" on-response="updateDone" auto> </iron-ajax>
		
		<iron-ajax
		id="getGlossary" method="GET" content-type="application/json"
		handle-as="json" on-response="fillGlossary" auto> </iron-ajax> 
		
		<iron-ajax
		id="deleteGlossaries" method="DELETE" content-type="application/json"
		handle-as="json" on-response="updateDone" auto> </iron-ajax>
		
		<iron-ajax
		id="updateSavedGlossary" method="POST" content-type="application/json"
		handle-as="json" on-response="updateDone" auto> </iron-ajax>
		
	 <paper-toolbar> <img src="images/dig-logo-original.png" alt=""></paper-toolbar>
		  <paper-header-panel>
		  
          <section class="adjustProjectSection">
            <div class="search-results-header">
              <div class="paper-font-title flex">DIG Projects</div>
            </div>
            <div class="h-divider"></div>
          </section>
          </paper-header-panel>
          <h3 style="padding:0em;margin-left:10px" class="projectNameValue"></h3>
		   <script>document.querySelector('.projectNameValue').innerHTML = projectName[1];</script>
         
         <paper-material id="projectOpenDialog" class="paperMaterialStyle">
		<paper-tabs selected="0" noink style="width:100%"> 
		<paper-tab class="paperTabs" id="menuSelector" onclick="showMenu()">Menu</paper-tab>
		<paper-tab class="paperTabs" id="fieldSelector" onclick="showField()">Field</paper-tab> 
		<paper-tab class="paperTabs" onclick="showEntity()">Tags</paper-tab>
		<paper-tab class="paperTabs" onclick="showGlossary()">Glossary</paper-tab>
		</paper-tabs>
		
		
		
		<iron-collapse id="menu" style="margin-left:20px;">
			
			<paper-button raised
					style="clear:left"> <strong>InferLink</strong></paper-button>
				
				 <paper-button raised
					style="clear:left"> <strong>ETK</strong></paper-button>
				 <paper-button raised
					style="clear:left"> <strong>Publish</strong></paper-button>
			
		</iron-collapse>
		<iron-collapse id="field">
		
		
				<div style="margin-bottom: 2em;">
				<br>
				<paper-button onclick="addFieldDialog.toggle()" raised
					style="float:right"> <strong>Add Field</strong></paper-button>
				<br> <br>
				<template is="dom-repeat" items="{{fields}}">
			<paper-material class="addPaddingToSections">
			<div style="padding: 8px;">
				<paper-button on-tap="editFieldFunction" raised
					style="float:right"> <strong>Edit</strong></paper-button>
				<!-- <paper-button on-tap="deleteFieldFunction" raised
					style="float:right"> <strong>Delete</strong></paper-button> -->
				<strong disabled="disabled">Name:</strong> {{item.0.name}}
			</div>
			<div style="padding: 8px;">
				<strong disabled="disabled">Label:</strong> {{item.0.screen_label}}
			</div>
			<div style="padding: 8px;">
				<strong disabled="disabled">Description:</strong>
				{{item.0.description}}
			</div>
			<div style="padding: 8px;">
				<strong disabled="disabled">Color:</strong>
				{{item.0.color}}
			</div>
			<div style="padding: 8px;">
				<strong disabled="disabled">Group Name:</strong>
				{{item.0.group_name}}
			</div>
			
			<div style="padding: 8px;">
				<strong disabled="disabled">Icon:</strong>
				{{item.0.icon}}
			</div>
			<div style="padding: 8px;">
				<strong disabled="disabled">Type:</strong>
				{{item.0.type}}
			</div>
			<div style="padding: 8px;">
				<strong disabled="disabled">Search Importance:</strong>
				{{item.0.search_importance}}
			</div>
			
			<div style="padding: 8px;">
				<paper-checkbox disabled="disabled" checked="{{item.0.combine_fields}}">Combine Fields</paper-checkbox>
				<paper-checkbox disabled="disabled" checked="{{item.0.show_in_facets}}"
					style="float:center;margin-left:53px;">Show in Facets</paper-checkbox>
			</div>
			<div style="padding: 8px;">
				<paper-checkbox disabled="disabled" checked="{{item.0.show_in_search}}">Show in Search</paper-checkbox>
				<paper-checkbox disabled="disabled" checked="{{item.0.use_in_network_search}}"
					style="float:center;margin-left:53px;">Use in Network Search</paper-checkbox>
			</div>
			<div style="padding: 8px;">
				<paper-checkbox disabled="disabled" checked="{{item.0.show_as_link}}">Show as Link</paper-checkbox>
				<paper-checkbox disabled="disabled" checked="{{item.0.show_in_result}}"
					style="float:center;margin-left:64px;">Show in Result</paper-checkbox>
			</div>
			<div style="padding: 8px;">
				<strong disabled="disabled">Glossaries:</strong>
				<paper-input disabled="disabled" value="{{item.0.glossaries}}"></paper-input>
				
			</div>
			</paper-material> </template>
		</div>
				
		
		
		</iron-collapse>
		<iron-collapse id="entity">
				<div style="margin-bottom: 2em;">
				<br>
				<paper-button onclick="addTagsDialog.toggle()" raised
					style="float:right"> <strong>Add Tag</strong></paper-button>
				<br> <br>
				<template is="dom-repeat" items="{{tags}}">
				<paper-material class="addPaddingToSections">
				<div>
					<strong>Name:</strong> {{item.0.name}}
					<div style="float: right">
						<paper-button on-tap="deleteTagsFunction" raised> <strong>Delete</strong></paper-button>
						<paper-button on-tap="editTagFunction" raised>
						<strong>Edit</strong></paper-button>
					</div>
					<br>
					<div>
						<br> <strong style="clear: left">Label:</strong>
						{{item.0.screen_label}}
					</div>
					<div>
					
						<br>	<strong style="clear: left">Description:</strong>
						{{item.0.description}}
					</div>
					<div>
						<br> <strong style="clear: left">Negative class precision:</strong>
						{{item.0.negative_class_precision}}
						<strong style="margin-left: 17em">Positive class precision:</strong>
						{{item.0.positive_class_precision}}
					</div>
					<div>
						<br>
					<paper-checkbox disabled="disabled" checked="{{item.0.include_in_menu}}"><strong>Include in Menu</strong>
					</paper-checkbox>
					</div>
					
					<br>
				</div>
				</paper-material> 
				</template>
				</div>
		</iron-collapse>
		<iron-collapse id="glossary">
		
			<div style="margin-bottom: 2em;">
				<br>
				<paper-button onclick="addGlossaryDialog.toggle()" raised
					style="float:right"> <strong>Add Glossary</strong></paper-button>
				<br> <br>
				<template is="dom-repeat" items="{{glossaries}}">
				<paper-material class="addPaddingToSections">
				<br><br>
				<div>
					
					<strong>Name:</strong> {{item.0}}
					<div style="float: right">
						<paper-button on-tap="deleteGlossaryFunction" raised> <strong>Delete</strong></paper-button>
						<!-- <paper-button on-tap="editGlossaryFunction" raised>
						<strong>Edit</strong></paper-button> -->
					</div>
					
				</div>
				<br><br>
				</paper-material> 
				</template>
			</div>
		
		</iron-collapse>
		 <paper-dialog id="addTagsDialog" class="OtherDialogStyles">

			<paper-input class="projectInputStyle" label="Name:" id="tagNameInput"></paper-input> 
			<paper-input class="projectInputStyle" label="Screen Label:" id="tagSceenLabelInput"></paper-input> 
			<paper-input class="projectInputStyle" label="Description" id="tagDescriptionInput"></paper-input> 
			<paper-input class="projectInputStyle" label="Negative class precision" id="tagNegativeInput"></paper-input> 
			<paper-input class="projectInputStyle" label="Positive class precision" id="tagPositiveInput"></paper-input> 
			<paper-checkbox class="projectInputStyle" id="tagCheckBoxInput">Include in Menu</paper-checkbox> 
				<br>
				<paper-button
				style="float:center;margin-top:20px;margin-left:10px;"
				onclick="addNewTag()" raised> <strong>Save</strong></paper-button>
			<paper-button style="float:center;margin-top:20px"
				onclick="addTagsDialog.toggle()" raised> <strong>Cancel</strong></paper-button>
		</paper-dialog>
		<paper-dialog id="editTagsDialog" class="OtherDialogStyles">
		
			<paper-input class="projectInputStyle" label="Name:" value="{{tagForm.name}}"></paper-input> 
			<paper-input class="projectInputStyle" label="Screen Label:" value="{{tagForm.screen_label}}"></paper-input> 
			<paper-input class="projectInputStyle" label="Description" value="{{tagForm.description}}"></paper-input> 
			<paper-input class="projectInputStyle" label="Negative class precision" value="{{tagForm.negative_class_precision}}"></paper-input> 
			<paper-input class="projectInputStyle" label="Positive class precision" value="{{tagForm.postitive_class_precision}}"></paper-input> 
			<paper-checkbox class="projectInputStyle" checked="{{tagForm.include_in_menu}}">Include in Menu</paper-checkbox> 
				<br>
				<paper-button
				style="float:center;margin-top:20px;margin-left:10px;"
				on-tap="updateTag" raised> <strong>Save</strong></paper-button>
			<paper-button style="float:center;margin-top:20px"
				onclick="editTagsDialog.toggle()" raised> <strong>Cancel</strong></paper-button>
		</paper-dialog> 
			<paper-dialog id="addFieldDialog" class="FieldDialogStyles">
			<paper-input style="margin:0px;" required class="" label="Name:" id="fieldnameinput"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Description:" id="fielddescriptioninput"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Screen Label:" id="fieldscreenlabelinput"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Color:" id="fieldcolorinput"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Group name:" id="fieldgroupnameinput"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Icon:" id="fieldiconinput"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Search Importance:" id="fieldsearchinput"></paper-input> 
			<paper-checkbox class="projectInputStyle" id="fieldcombinedfieldsinput">Combine Fields</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" id="fieldfacetinput">Show in Facets</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" id="fieldresultinput">Show in Results</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" id="fieldlinkinput">Show in Links</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" id="fieldnetworkinput">Show in Network Search</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" id="fieldsearchinput">Show in Search</paper-checkbox> 
			
			<br>
							<paper-button style="float:center;margin-top:20px"
				onclick="showFieldGlossaries.toggle()" raised> <strong>Glossaries</strong></paper-button>
	
				<paper-button
				style="float:center;margin-top:20px;margin-left:10px;"
				onclick="addNewField()" raised> <strong>Save</strong></paper-button>
			<paper-button style="float:center;margin-top:20px"
				onclick="addFieldDialog.toggle()" raised> <strong>Cancel</strong></paper-button>
				
			</paper-dialog>
		
		<paper-dialog id="showFieldGlossaries" class="FieldDialogStyles">
		
			<template is="dom-repeat" items="{{glossaries}}">
				<paper-material class="addPaddingToSections">
				<br><br>
				<div>
					<br>
					<paper-checkbox style="margin:0px;" class="projectInputStyle" id="fieldglossaryinput" value="{{item.0}}"></paper-checkbox> 
				</div>
				<br><br>
				</paper-material> 
				</template>
		</paper-dialog>
		
		
		<paper-dialog id="EditFieldGlossaries" class="FieldDialogStyles">
		
			<template is="dom-repeat" items="{{glossaries}}">
				<paper-material class="addPaddingToSections">
				<br><br>
				<div>
					<br>
					<paper-checkbox style="margin:0px;" class="projectInputStyle" id="fieldglossaryinput" value="{{item.0}}"></paper-checkbox> 
				</div>
				<br><br>
				</paper-material> 
				</template>
		</paper-dialog>
		
		
		<paper-dialog id="editFieldsDialog" class="FieldDialogStyles">
		
			<paper-input style="margin:0px;" class="projectInputStyle" label="Description:" value="{{fieldForm.description}}"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Screen Label:" value="{{fieldForm.screen_label}}"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Color:" value="{{fieldForm.color}}"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Group name:" value="{{fieldForm.group_name}}"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Icon:" value="{{fieldForm.icon}}"></paper-input> 
			<paper-input style="margin:0px;" class="projectInputStyle" label="Search Importance:" value="{{fieldForm.search_importance}}"></paper-input> 
			<paper-checkbox class="projectInputStyle" checked="{{fieldForm.combine_fields}}">Combine Fields</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" checked="{{fieldForm.show_in_facets}}">Show in Facets</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" checked="{{fieldForm.show_in_result}}">Show in Results</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" checked="{{fieldForm.show_as_link}}">Show in Links</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" checked="{{fieldForm.use_in_network_search}}">Show in Network Search</paper-checkbox> 
			<paper-checkbox class="projectInputStyle" checked="{{fieldForm.show_in_search}}">Show in Search</paper-checkbox> 
			
			<br>
							<paper-button style="float:center;margin-top:20px"
				onclick="EditFieldGlossaries.toggle()" raised> <strong>Glossaries</strong></paper-button>
	
				<paper-button
				style="float:center;margin-top:20px;margin-left:10px;"
				on-tap="updateField" raised> <strong>Save</strong></paper-button>
			<paper-button style="float:center;margin-top:20px"
				onclick="editFieldsDialog.toggle()" raised> <strong>Cancel</strong></paper-button>
		
		</paper-dialog>
		
		
		
		<paper-dialog id="addGlossaryDialog" class="GlossaryDialogStyles">
			<form is="iron-form" content-type="multipart/form-data" id="formD" on-iron-form-presubmit="onPresubmit" method="POST">
				
				<paper-input style="margin:0px;" id="glossary_name" name="glossary_name" class="projectInputStyle" label="Glossary Name:" id="glossaryName"></paper-input> 
			    <paper-input type="file" name="glossary_file" id="input" onchange='openFile(event)'></paper-input>
      		<paper-button raised onclick="submitFormData()">Submit</paper-button>
			</form>
		</paper-dialog>
		
		
		
		
		</paper-material>
</template>
</dom-module>
<project-details></project-details>
<script>

Polymer({
    is: 'project-details',
    
    ready : function() {
    	this.fields=[];
    	this.tags = [];
    	this.glossaries = [];
    	this.tagsData = [];
    	this.fieldsData = [];
    	var obj = {};
        obj.Authorization = "Basic " + btoa("Memex:USC-ISI-I2");
        this.$.getTags.headers = obj;
        this.$.getTags.url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/tags";
    	this.$.getTags.generateRequest();
    	
    	this.$.getFields.headers = obj;
        this.$.getFields.url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/fields";
    	this.$.getFields.generateRequest();
    	
    	
    	this.$.getGlossary.headers['Authorization'] = "Basic " + btoa("Memex:USC-ISI-I2");
    	this.$.getGlossary.url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/glossaries";
    	this.$.getGlossary.generateRequest();
    	
     },
     showFile:function() {
    	 
     },
     convertFileInputToFormData: function(){
    	 var file = this.$.input.inputElement.files[0];
    	 this.text="";
    	 var reader = new FileReader();
    	    reader.onload = function () {
    	        this.text = reader.result;
    	    };
    	    reader.readAsText(file);
    	},
    
     onPresubmit:function(e){
    	/*  var obj = {"Authorization":"Basic " + btoa("Memex:USC-ISI-I2")};
    	 
         e.target.request.headers = (obj); */
    	 var form = this.$.form;
         this.convertFileInputToFormData();
    	 form.request.body = this.text;
     },
     
     submitForm:function() {
/*     	 var dataForm  = 'formD';
    	 var form = document.getElementById(dataForm);
    	 var formData = new FormData(form);
    	for (var [key, value] of formData.entries()) { 
    	  console.log(key, value);
    	}
 */    	 
    	/*  $.ajax({
    	        url         :url,
    	        data        : this.$.formD.serialize(),
    	        type        : 'POST',
    	        processData: false,
    	        success     : function(data, textStatus, jqXHR){
    	            console.log("submitted");
    	        }
    	    }); */
    	
     },
     fillTags : function(data) {
    	 this.tags = Object.keys(data.detail.response).map(function(e) {
     		  return [data.detail.response[e]];
     		});
    	
     	this.push('tags',this.tags.pop());
     },
     fillFields : function(data) {
    	 this.fields = Object.keys(data.detail.response).map(function(e) {
     		  return [data.detail.response[e]];
     		});
    	
     	this.push('fields',this.fields.pop());
     },
     fillGlossary : function(data) {
    	 this.glossaries = Object.keys(data.detail.response).map(function(e) {
     		  return [data.detail.response[e]];
     		});
    	
     	this.push('glossaries',this.glossaries.pop());
     },
     deleteTagsFunction:function(e) {
    	 var obj = {};
         obj.Authorization = "Basic " + btoa("Memex:USC-ISI-I2");
         this.$.deleteTags.headers = obj;
         this.$.deleteTags.url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/tags/"+(e.model.item[0].name).split(":")[0];
     	this.$.deleteTags.generateRequest();
    	 
     },
     editTagFunction:function(e){
    	 this.tagForm = {};
    	 this.tagForm = e.model.item[0];
    	 editTagsDialog.toggle();
     },
     updateTag:function(e) {
    	 var obj = {};
         obj.Authorization = "Basic " + btoa("Memex:USC-ISI-I2");
         this.$.updateSavedTags.headers = obj;
         this.$.updateSavedTags.url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/tags/"+this.tagForm.name;
         this.$.updateSavedTags.body = JSON.stringify({
      		  "tag_name": this.tagForm.name+"",
       		  "tag_object": {
       		    "description": this.tagForm.description+"",
       		    "include_in_menu": this.tagForm.include_in_menu,
       		    "name": this.tagForm.name+"",
       		    "negative_class_precision": this.tagForm.negative_class_precision,
       		    "positive_class_precision": this.tagForm.positive_class_precision,
       		    "sceen_label":this.tagForm.screen_label
       		  }
       		});
         this.$.updateSavedTags.generateRequest();
     },
     updateDone:function() {
    	 location.reload();
     },
     
     deleteFieldFunction:function(e) {
    	 var obj = {};
         obj.Authorization = "Basic " + btoa("Memex:USC-ISI-I2");
         this.$.deleteFields.headers = obj;
         this.$.deleteFields.url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/fields/"+(e.model.item[0].name).split(":")[0];
     	this.$.deleteFields.generateRequest();
    	 
     },
     deleteGlossaryFunction:function(e){
    	 var obj = {};
         obj.Authorization = "Basic " + btoa("Memex:USC-ISI-I2");
         this.$.deleteGlossaries.headers = obj;
         this.$.deleteGlossaries.url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/glossaries/"+(e.model.item[0]).split(":")[0];
     	this.$.deleteGlossaries.generateRequest();
     },
     editFieldFunction:function(e){
    	 this.fieldForm = {};
    	 this.fieldForm = e.model.item[0];
    	 editFieldsDialog.toggle();
     },
     editGlossaryFunction:function(e){
    	 this.glossaryForm = {};
    	 this.fieldForm = e.model.item[0];
    	 editGlossariesDialog.toggle();
     },
     updateField:function(e) {
    	 var obj = {};
         obj.Authorization = "Basic " + btoa("Memex:USC-ISI-I2");
         this.$.updateSavedFields.headers = obj;
         this.$.updateSavedFields.url = "http://52.36.12.77:9879/projects/"+projectName[1]+"/fields/"+this.fieldForm.name;
         this.$.updateSavedFields.body = JSON.stringify({
      		  "field_name": this.fieldForm.name,
       		  "field_object": {
       		    "color": this.fieldForm.color,
       		    "combine_fields": this.fieldForm.combine_fields,
       		    "description": this.fieldForm.description,
       		    "glossaries": [
					this.fieldForm.glossaries
       		    ],
       		    "group_name": this.fieldForm.group_name,
       		    "icon": this.fieldForm.icon,
       		    "name": this.fieldForm.name,
       		    "screen_label": this.fieldForm.screen_label,
       		    "search_importance": this.fieldForm.search_importance,
       		    "show_as_link": this.fieldForm.show_as_link,
       		    "show_in_facets": this.fieldForm.show_in_facets,
       		    "show_in_result": this.fieldForm.show_in_result,
       		    "show_in_search": this.fieldForm.show_in_search,
       		    "type": this.fieldForm.type,
       		    "use_in_network_search": this.fieldForm.use_in_network_search
       		  }
       		});
         this.$.updateSavedFields.generateRequest();
     }
     
    
    });
</script>